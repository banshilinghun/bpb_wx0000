<!--pages/recommend/recommend.wxml-->
<view class='recommend-container'>
  <view class='image-wrapper'>
    <image class='topImage' style='height:{{ topImage.imageHeight }}px' src='{{ topImage.imageSrc }}' bindtap='previewImage' mode='aspectFill'></image>
  </view>

  <!-- 活动规则 -->
  <view class="flex-container {{ pageFlag ? 'flex-column' : 'flex-column-reverse' }}">
    <view class='recommend-rule-wrapper'>
      <view class='recommend-rule'>
        <view class='rule-title dark-color bold-font'>活动规则：</view>
        <view class='rule-detail'>
          <view class='rule-item'>
            <text class='rule-one-text dark-color margin-top-step' decode='{{true}}'>1.&ensp;&ensp;</text>
            <bpb-steps type="vertical" steps="{{stepsList}}"></bpb-steps>
          </view>
          <view class='text-block rule-item'>
            <text class='rule-one-text dark-color' decode='{{true}}'>2.&ensp;&ensp;</text>
            <text class='rule-one-text dark-color'>推荐奖励发放后，请到页面“我的”-“待收收益”里领取。</text>
          </view>
          <view class='text-block rule-item'>
            <text class='rule-one-text dark-color' decode='{{true}}'>3.&ensp;&ensp;</text>
            <text class='rule-one-text dark-color'>关注“奔跑宝”服务号，可实时收到奖励领取提醒。</text>
          </view>
        </view>
      </view>
      <view class='divider'></view>
      <view class='share-container'>
        <view class='share-wrapper'>
          <button class='share-layout' open-type='share' style='background-color: #fff' data-type='normal'>
            <image class='share-icon' src='../../image/share-friend.png'></image>
            <text class='share-text share-color'>微信好友</text>
          </button>
        </view>
        <view class='share-wrapper' bindtap='shareMoments'>
          <view class='share-layout'>
            <image class='share-icon' src='../../image/moment.png'></image>
            <text class='share-text share-color'>微信朋友圈</text>
          </view>
        </view>
      </view>
      <view class='divider'></view>
    </view>
    <!-- 推荐结果 -->
    <view>
      <view class='recommend-result'>
        <view class='recommend-success'>
          <text class='rule-title dark-color bold-font'>我成功推荐了{{ recommendList ? recommendList.length : 0 }}个好友，累计领取奖励{{ totalAword }}元</text>
        </view>
        <view class='split-line'></view>
        <view class='get-award-wrapper'>
          <text class='get-award-text dark-color' wx:if='{{ GoatAward != 0 }}'>未领取奖励</text>
          <text class='high-light-text theme-color bold-font' decode='{{true}}' wx:if='{{ GoatAward != 0 }}'>&ensp;{{ GoatAward }}元</text>
            <text class='remind-text dark-color' wx:if='{{ GoatAward == 0 }}'>当前没有可领取的奖励</text>
          <button class='btn-recommend btn-common {{ awardBtnAbled ? "btn-enable" : "btn-disable" }}' bindtap='receiveAwardClick'>领取</button>
        </view>
        <view class='split-line'></view>
        <view class='remind-friend'>
          <view style='width:{{ remindWidth }}px'>
            <text class='remind-text dark-color' wx:if='{{ unfinishedNumber != 0 }}'>{{unfinishedNumber}}个好友未完成，完成后奖励可达到</text>
            <text class='high-light-text theme-color bold-font' decode='{{true}}' wx:if='{{ unfinishedNumber != 0 }}'>&ensp;{{ remainAward }}元</text>
            <text class='remind-text dark-color' wx:if='{{ unfinishedNumber == 0 }}'>暂时还没有可提醒的好友</text>
          </view>
          <button class='btn-recommend btn-common {{ remindBtnAbled ? "btn-enable" : "btn-disable" }}' bindtap='remindFriendClick'>一键提醒好友</button>
        </view>
      </view>
      <view class='divider'></view>

      <!-- 已推荐好友 -->
      <view class='recommend-friend-list' wx:if='{{ recommendList.length != 0 && recommendList }}'>
        <view class='rule-title dark-color bold-font recommend-people'>已推荐的好友(共{{ recommendList ? recommendList.length : 0 }}人)：</view>
        <view wx:for='{{ recommendList }}' wx:key='item.id'>
          <view class='recommend-list-item'>
            <!-- {{item.wx_avatar}} -->
            <image class='avatar' src='{{ item.wx_avatar }}'></image>
            <text class='nickname'>{{ item.nickname }}</text>
            <text class='install-ad'>已安装广告</text>
            <text class='time'>{{ item.register_date }}</text>
            <view class='recommendList-line' wx:if='{{index != (recommendList.length - 1)}}'></view>
          </view>
        </view>
        <view class='divider' style='background-color: #fff'></view>
      </view>
    </view>
  </view>
</view>

<dialog showDialog='{{ showDialog }}' bind:btnclick='dialogClickListener' title='提示' description='分享给好友吧分享给好友吧分享给好' btnText='分享'/>

<!-- 拉新分享 -->
<share-moment avatar='{{ shareAvatar }}' nickname='{{ shareNickname }}' showShareModel='{{ showNewShare }}'></share-moment>

<!-- 奖励分享 -->
<share-award avatar='{{ shareInfo.shareAvatar }}' nickname='{{ shareInfo.shareNickname }}' awardMoney='{{ shareInfo.awardMoney }}' awardType='{{ shareInfo.awardType }}' showShareModel='{{ showAwardModel }}'></share-award>

<share-popup showPop='{{ showSharePop }}' shareFriendType='{{ shareFriendType }}' bind:shareMoment='shareMomentListener'></share-popup>
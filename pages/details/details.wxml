<view>
  <view id='b-detail-top'>
    <view class='taewtw' wx:if='{{loginStaus==0}}' bindtap="goRegister">ç«‹é©¬æ³¨å†Œï¼Œèººç€èµšé’±ï¼Œé€Ÿé€Ÿæ¥æŠ¢</view>
    <view class='taewtw' wx:if='{{loginStaus==1}}' bindtap="goAuth">ç«‹é©¬è®¤è¯ï¼Œèººç€èµšé’±ï¼Œé€Ÿé€Ÿæ¥æŠ¢</view>
  </view>
  <scroll-view scroll-y='true' style='height: {{ scrollHeight }}px'>
    <view class='detail-container'>
      <view class="page-section page-section-spacing swiper">
        <swiper indicator-dots="true" autoplay="true" interval="3000" duration="800" class="swiper-banner bg-white" style='height:{{bannerHeight+"px"}};width:{{windowWidth+"px"}}'>
          <block wx:for="{{banners}}" wx:key="item.id">
            <swiper-item>
              <image src="{{item}}" mode="scaleToFill" style='height:{{bannerHeight+"px"}};width:{{windowWidth+"px"}}'></image>
            </swiper-item>
          </block>
        </swiper>
      </view>
      <view class="profile-wrapper">
        <block>
          <view class="profile frpro">
            <view class="profile-item cwsfts">
              <text>{{adInfo.name}}</text>
            </view>
            <view class='profile-ad-status'>
              <view wx:if="{{adInfo.run_status==0}}">
                <text class="time timetxt2">å³å°†å¼€å§‹</text>
              </view>
              <view wx:if="{{adInfo.run_status==1}}">
                <text class="time">å‰©ä½™{{adInfo.current_count}}è¾†</text>
              </view>
              <view wx:if="{{adInfo.run_status==2}}">
                <text class="time timetxt2">æŠ•æ”¾ä¸­</text>
              </view>
              <view wx:if="{{adInfo.run_status==3}}">
                <text class="time timetxt2">æ£€æµ‹ä¸­</text>
              </view>
              <view wx:if="{{adInfo.run_status==4}}">
                <text class="time timetxt">å·²ç»“æŸ</text>
              </view>
              <view>
                <text class="time timetxt">ï¼ˆå…±{{ adInfo.total_count }}è¾†ï¼‰</text>
              </view>
            </view>
          </view>
        </block>
        <block>
          <view class="profile">
            <!-- é¢„è®¡æ”¶ç›Š -->
            <view class="profile-item">
              <view class='profole-type'>é¢„è®¡æ”¶ç›Š:</view>
              <view class="profole-type-right red-text" wx:if='{{adInfo.amount!=null&&isDiDi!=1}}'>ï¿¥{{adInfo.amount}}</view>
              <view class="profole-type-right red-text adxtwtx" bindtap='goValuation' wx:if='{{isDiDi==1}}'>
                <view class='b-income-explain-wrapper'>
                  <view>ï¿¥300
                    <label class="data-blt2">~</label>868</view>
                  <image class='b-explain-icon' src='https://wxapi.benpaobao.com/static/app_img/explain-theme-icon.png'></image>
                </view>
              </view>
              <view class="profole-type-right tasts" wx:if='{{adInfo.amount==null}}'>èº«ä»½è®¤è¯åå¯æŸ¥çœ‹æ”¶ç›Š</view>
            </view>
            <!-- å¹¿å‘Šç±»å‹ -->
            <view class='profile-right-item'>
              <view class="profole-type">
                <text>å¹¿å‘Šç±»å‹:</text>
              </view>
              <view class="profole-type-right">
                <label class="data-text swtwxs" wx:if="{{adInfo.type==0}}">è½¦å°¾</label>
                <label class="data-text swtwxs" wx:if="{{adInfo.type==1}}">è½¦å†…</label>
                <label class="data-text swtwxs" wx:if="{{adInfo.type==2}}">è½¦å°¾+è½¦å†…</label>
                <label class="data-text swtwxs" wx:if="{{adInfo.type==3}}">è½¦å†…+è½¦å¤–</label>
                <label class="data-text swtwxs" wx:if="{{adInfo.type==4}}">è½¦å¤–</label>
              </view>
            </view>
          </view>
        </block>
        <block>
          <view class="profile">
            <view class="profile-item">æ”¶ç›Šæ—¶é—´:</view>
            <view class="right-text">{{adInfo.begin_date}}
              <label class="data-blt">~</label>{{adInfo.end_date}}</view>
          </view>
        </block>
        <block>
          <view class="profile">
            <view class="profile-item">å®‰è£…æ—¶é—´:</view>
            <view class="right-text">{{adInfo.begin_date}}
              <label class="data-blt">~</label>{{adInfo.end_date}}</view>
          </view>
        </block>
        <block>
          <view class="profile">
            <view class="profile-item">è½¦è¾†è¦æ±‚:</view>
            <view class="right-text horizontal-center" bindtap='handleColorExplain'>
              <image class='b-car-require' src='https://wxapi.benpaobao.com/static/app_img/explain-gray-icon.png'></image>
              <text wx:if='{{ adInfo.city }}'>{{ adInfo.city}}</text>
              <text wx:if='{{ carColor }}'>,{{ carColor }}</text>
            </view>
          </view>
        </block>
      </view>
      <block wx:if="{{checkPlan}}">
        <view class="profile-wrapper" bindtap="checkPlan" data-adId="{{adInfo.id}}">
          <view class="profile frpro">
            <view class="profile-item cwsfts">æ£€æµ‹è®¡åˆ’</view>
            <image class="profile-arrow" src="/image/arrow.png"></image>
          </view>
        </view>
      </block>

      <!-- å‚ä¸åˆ—è¡¨ -->
      <view class='join-list-wrapper' wx:if='{{showJoining}}' bindtap='joinClick'>
        <view class='join-left-layout'>
          <text class='already-join-text'>å·²å‚ä¸</text>
          <text class='already-join-number'>{{ joinCount + 'äºº'}}</text>
        </view>
        <view class='join-center-line'></view>
        <scroll-view class='join-avatar-scroll' scroll-x='true'>
          <view class='join-avatar-wrapper' wx:for='{{avatarList}}' wx:for-item='item' wx:key='index'>
            <view class='join-avatar-item'>
              <image class='join-avatar' src='{{item.wx_avatar}}'></image>
            </view>
          </view>
        </scroll-view>
        <view>
          <image class='arrow-image' src='../../image/arrow.png'></image>
        </view>
      </view>
      <!-- æ’é˜Ÿä¸­åˆ—è¡¨ -->
      <view class='join-list-wrapper queue' wx:if='{{ showWaiting }}' bindtap='queueClick'>
        <view class='join-left-layout'>
          <text class='already-join-text'>æ’é˜Ÿä¸­</text>
          <text class='already-join-number'>{{ queueCount + 'äºº'}}</text>
        </view>
        <view class='join-center-line'></view>
        <scroll-view class='join-avatar-scroll' scroll-x='true'>
          <view class='join-avatar-wrapper' wx:for='{{ queueList }}' wx:for-item='item' wx:key='index'>
            <view class='join-avatar-item'>
              <image class='join-avatar' src='{{ item.wx_avatar }}'></image>
            </view>
          </view>
        </scroll-view>
        <view>
          <image class='arrow-image' src='../../image/arrow.png'></image>
        </view>
      </view>
      <!-- æœåŠ¡ç½‘ç‚¹åˆ—è¡¨ -->
      <view class="protwo">
        <block wx:if="{{service.length>0}}">
          <view class='service-title-wrapper'>
            <view class="profile frpro">
              <view class="profile-item cwsfts">é¢„çº¦å‰å¾€ä¸‹åˆ—æœåŠ¡ç½‘ç‚¹</view>
            </view>
          </view>
        </block>

        <view class='list-root-wrapper'>
          <!-- åˆ—è¡¨ -->
          <view class='list-transform'>
            <block wx:for="{{service}}" wx:for-index="index" wx:key="item.id" wx:if='{{ !showMap }}'>
              <view class="itemcon {{item.lista==2?'curitem':''}}">
                <view class="item {{item.lista==2?'curitemList':''}}">
                  <image src='../../image/sev_tips.png' class='sev_tips' wx:if='{{index==0&&item.lista!=2&&haveLoca}}'></image>
                  <image src='../../image/already.png' class='sev_tips' wx:if='{{index==0&&item.lista==2}}'></image>
                  <image wx:if='{{item.small_logo!=null}}' src='{{item.small_logo}}' class='sev_logo' catchtap='previewImage' data-image='{{ item.logo }}' data-samllImage='{{item.small_logo}}'></image>
                  <image wx:if='{{item.small_logo==null}}' src='../../image/noimg.png' class='sev_logo'></image>
                  <view class="item-middle">
                    <view>
                      <text class="title">{{item.name}}</text>
                    </view>
                    <view class="myad-li" bindtap='showAddress' data-address='{{item}}'>
                      <view class="message">
                        <image src='../../image/dw.png'></image>{{item.address}}
                      </view>
                      <!-- <label class="province-text txtstx" wx:if='{{item.lista==2}}'>å·²é¢„çº¦{{selDate}} {{selTime}}</label> -->
                      <view class="mmtext">å‰©ä½™è½¦è¾†
                        <label class="province-text">{{item.ad_count-item.subscribe_count}}è¾†</label>

                      </view>
                    </view>

                  </view>
                  <view class="item_right">
                    <view>
                      <text class="time">{{item.distance}}km</text>
                    </view>
                    <view class="orgtext" bindtap="goMap" data-longitude="{{item.lng}}" data-latitude="{{item.lat}}" data-name="{{item.name}}" data-address="{{item.address}}">
                      <image src='../../image/dh.png'></image>å¯¼èˆª
                    </view>
                    <view class="fastwx" wx:if='{{item.lista==1}}' bindtap="arrangement" data-adId="{{adId}}" data-serverId="{{item.id}}" data-serverName='{{ item.name }}' data-serverAddress='{{ item.address }}'> é¢„çº¦</view>
                    <view class="fastwx3" wx:if='{{item.lista==2}}' bindtap="cancel"> å–æ¶ˆ</view>
                    <view class="fastwx2" wx:if='{{item.lista==0}}'> é¢„çº¦</view>
                  </view>
                </view>
                <view class='yy_time' wx:if='{{item.lista==2}}'>
                  <label class="province-text">å·²é¢„çº¦{{selDate}} {{selTime}}</label>
                </view>
              </view>
            </block>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>
  <!-- åº•éƒ¨åˆ†äº«é¢„çº¦æŒ‰é’® -->
  <view class='action_bottom' id="b-detail-bottom">
    <button data-adName="{{adInfo.name}}" class='wtwabt' bindtap='shareDetailListener'>
      <view class='share-action-wrapper'>
        <image src='../../image/shareicon.png'></image>
        <view class='sharetext'>{{ shareAwardText }}</view>
      </view>
    </button>
    <view class='subscribe_immediately {{ actionStatus === 1 ? "subscribe-focus" : "subscribe-unfocus" }}' bindtap='handleAction'>
      <view class='subcribe-wrapper'>
        <text>{{ actionStr }}</text>
      </view>
    </view>
  </view>
</view>

<dialog showDialog='{{showGoodsDetail}}' bind:btnclick='dialogClickListener' title='é¢„çº¦æˆåŠŸ' description='åˆ†äº«ç»™å¾®ä¿¡å¥½å‹ï¼Œè®©ä½ çš„æœ‹å‹ä»¬ä¸€èµ·èµšé’±å§!' btnText='åˆ†äº«å¾®ä¿¡å¥½å‹' />
<view class="scrollUp" wx:if="{{goHome}}" bindtap="backHome">
  <view class="count">
  </view>
</view>
<bpb-reward reward='{{reward}}'></bpb-reward>
<share-popup showPop='{{ showSharePop }}' bind:shareMoment='shareMomentListener' adId="{{ adInfo.id }}"></share-popup>
<share-detail avatar='{{ shareAvatar }}' nickname='{{ shareNickname }}' incomeMoney='{{ incomeMoney }}' joinNumber='{{ joinNumber }}' joinAvatarList='{{ joinAvatarList }}' adImageUrl='{{ adImageUrl }}' adName='{{ adName }}' adTime='{{ adTime }}' showShareModel='{{ showShareModel }}'
  adId='{{adId}}' bind:hideDialog='hideDialogListener'>
</share-detail>
<!--æ­£åœ¨åŠ è½½-->
<view class='load-more' hidden='{{!isShowLoadingMore}}'>
  <view class="weui-loadmore">
    <view class="weui-loading"></view>
    <view class="weui-loadmore__tips" style='color:#999999'>å¥”è·‘ä¸­ğŸš—...</view>
  </view>
</view>
<!-- è§„åˆ™å¼¹æ¡† -->
<rule-dialog showRuleDialog='{{ showRule }}' bind:btnclick='iKnow' bind:btnclickDetail='goRuleDetail' data-adId="{{ adId }}" data-serverId="{{ serverId }}" data-serverName='{{ serverName }}' data-serverAddress='{{ serverAddress }}'></rule-dialog>
<!-- åœ°å€å¼¹æ¡† -->
<dialog-address showAddressDialog='{{ showAddressDialog }}' address='{{ address }}' phone='{{ phone }}'></dialog-address>
<!-- æ³¨å†Œè®¤è¯å¼¹æ¡† -->
<dialog-auth showDialog='{{ showAuthDialog }}' imageSrc='{{ "https://wxapi.benpaobao.com/static/app_img/auth-icon.png" }}' btnStr='{{ authStr }}' status='{{ authStatus }}' content='{{ authContent }}' bind:action='handleActionTap'></dialog-auth>

<!-- é¢„çº¦æ’é˜Ÿ -->
<model visible="{{ visible }}" title="é¢„çº¦æ’é˜Ÿç¡®è®¤" cancelText="æš‚ä¸æ’é˜Ÿ" confirmText="ç¡®è®¤æ’é˜Ÿ" cancelLoading="{{ cancelLoading }}" confirmLoading="{{ confirmLoading }}" bind:cancel="handleCancel" bind:confirm="handleConfirm">
  <view class='subscribe-wrapper'>
    <view class='subscribe-body'>
      <view class='b-queue-model-item'>æ’é˜Ÿåºå·: {{ serial_number }}</view>
      <view class='b-queue-model-item'>å½“å‰æ’é˜Ÿäººæ•°: {{ queue_count }}</view>
      <view class='b-queue-model-item'>éœ€ç­‰å¾…äººæ•°: {{ position }}</view>
    </view>
    <view class='b-queue-notify-text'>è¯·åŠæ—¶å…³æ³¨å…¬ä¼—å·é€šçŸ¥ï¼ŒæŸ¥çœ‹æ’é˜Ÿæƒ…å†µ</view>
  </view>
</model>

<!-- è½»æç¤º -->
<b-toast id="toast"></b-toast>